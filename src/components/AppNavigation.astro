---
import { cn } from "@/lib/utils";
import { UserMenu } from "./UserMenu";

const { pathname } = Astro.url;

// Determine active tab
const isPortfolio = pathname === "/" || pathname.startsWith("/portfolio");
const isWatchlist = pathname.startsWith("/watchlist");

const linkBase = "flex items-center justify-center py-3 px-4 rounded-lg border text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2";
const activeClasses = "bg-secondary-foreground text-secondary border-secondary-foreground shadow-sm";
const inactiveClasses = "bg-card text-muted-foreground border-border hover:bg-accent hover:text-accent-foreground";
---

<nav class="relative w-full max-w-7xl mx-auto px-4 pt-6 pb-2" aria-label="Main Navigation">
  <div class="grid grid-cols-2 gap-4">
    <a
      href="/portfolio"
      class={cn(linkBase, isPortfolio ? activeClasses : inactiveClasses)}
      aria-current={isPortfolio ? "page" : undefined}
    >
      Portfolio
    </a>
    <a
      href="/watchlist"
      class={cn(linkBase, isWatchlist ? activeClasses : inactiveClasses)}
      aria-current={isWatchlist ? "page" : undefined}
    >
      Watchlist
    </a>
  </div>
  <div class="absolute right-4 top-full mt-2 flex items-center gap-2">
    <UserMenu client:load />
  </div>
</nav>
